---
import '../styles/global.css';
import profileData from '../data/profile.json';
import Header from '../components/layout/Header.astro';
import Section from '../components/layout/Section.astro';
import Footer from '../components/layout/Footer.astro';
import MetaFooter from '../components/layout/MetaFooter.astro';
import Timeline from '../components/experience/Timeline.astro';
import Hero from '../components/hero/Hero.astro';
import {
	HighlightReveal,
	CardGrid,
	CardItem,
	SkillsReveal,
	SkillCategory,
	RootsReveal
} from '../components/animations/AnimatedSection';

const { hero, highlight, experience, philosophy, skills, roots, meta } = profileData;
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<link rel="icon" href="/favicon.ico" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="generator" content={Astro.generator} />
		<title>{hero.name} | {hero.headline}</title>
		<meta name="description" content={hero.tagline} />

		<!-- Preconnect to Google Fonts -->
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
			rel="stylesheet"
		/>
	</head>
	<body class="min-h-screen bg-gray-50 text-gray-800">
		<Header name={hero.name} />

		<main class="max-w-4xl mx-auto px-4">
			<!-- Hero Section -->
			<Section id="hero" class="pt-8 md:pt-12">
				<Hero
					name={hero.name}
					headline={hero.headline}
					tagline={hero.tagline}
					location={hero.location}
					impactStats={hero.impactStats}
					ctaLinks={hero.ctaLinks}
				/>
			</Section>

			<!-- Highlight Section -->
			<Section id="highlight" variant="highlight" class="accent-bar pl-6">
				<HighlightReveal client:visible>
					<div class="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4">
						<div>
							<h2 class="text-title gradient-text-vibrant">{highlight.title}</h2>
							<p class="text-small text-muted mt-1">
								<span class="tag-primary mr-2">{highlight.category}</span>
								{highlight.context}
							</p>
						</div>
					</div>
					<p class="text-body mt-4 text-gray-700">{highlight.description}</p>
				</HighlightReveal>
			</Section>

			<!-- Experience Section -->
			<Section id="experience" title="Experience" variant="accent">
				<Timeline experiences={experience} />
			</Section>

			<!-- Philosophy Section -->
			<Section id="philosophy" title="Philosophy" variant="gradient">
				<CardGrid client:visible className="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
					{philosophy.map((item) => (
						<CardItem client:visible>
							<article class="p-6 bg-white rounded-lg border border-gray-200 h-full">
								<h3 class="text-title text-gray-900">{item.title}</h3>
								<p class="text-body text-gray-700 mt-3">{item.belief}</p>
								{item.source && (
									<p class="text-small text-muted mt-4 italic">
										— {item.source.author}, {item.source.work}
									</p>
								)}
							</article>
						</CardItem>
					))}
				</CardGrid>
			</Section>

			<!-- Skills Section -->
			<Section id="skills" title="Skills">
				<SkillsReveal client:visible className="space-y-8">
					{skills.map((category) => (
						<SkillCategory client:visible>
							<h3 class="text-title text-gray-700 mb-4">{category.category}</h3>
							<div class="flex flex-wrap gap-3">
								{category.skills.map((skill) => (
									<div
										class:list={[
											'px-4 py-2 rounded-lg border text-small font-medium',
											skill.highlight
												? 'bg-primary-500/10 border-primary-500/30 text-primary-600'
												: 'bg-gray-100 border-gray-200 text-gray-700',
										]}
									>
										<span>{skill.name}</span>
										<span class="ml-2 opacity-60">
											{'●'.repeat(skill.level)}{'○'.repeat(5 - skill.level)}
										</span>
									</div>
								))}
							</div>
						</SkillCategory>
					))}
				</SkillsReveal>
			</Section>

			<!-- Roots Section -->
			<Section id="roots" title="Roots">
				<RootsReveal client:visible>
					<div class="p-6 bg-white rounded-lg border border-gray-200">
						<p class="text-title text-gray-900">
							{roots.degree}
						</p>
						<p class="text-body text-gray-600 mt-1">
							{roots.institution} · {roots.focus}
						</p>
						<p class="text-body text-muted mt-4 italic">
							"{roots.transferableInsight}"
						</p>
					</div>
				</RootsReveal>
			</Section>
		</main>

		<Footer
			buildTimestamp={meta.buildTimestamp}
			agents={meta.agents}
			bundleSize={meta.bundleSize}
			sourceUrl={meta.sourceUrl}
		/>
		<!-- Meta Footer: The "How This Was Built" Story -->
		<MetaFooter />
	</body>
</html>
